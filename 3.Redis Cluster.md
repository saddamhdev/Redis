Below is **clean, structured, beginner-to-advanced documentation on Redis Cluster**, written like **official docs + interview notes**.
You can **read, revise, and reuse** this.

---

# ğŸ“˜ Redis Cluster â€“ Complete Documentation

---

## 1ï¸âƒ£ What is Redis Cluster?

**Redis Cluster** is Redisâ€™s **native horizontal scaling and high-availability solution**.

It allows Redis to:

* Scale **horizontally** (multiple nodes)
* Distribute data automatically (**sharding**)
* Survive node failures (**failover**)

> Redis Cluster is designed for **large datasets, high throughput, and zero single point of failure**.

---

## 2ï¸âƒ£ Problems Redis Cluster Solves

Single Redis instance limitations:

* Limited RAM âŒ
* Single CPU core âŒ
* Single point of failure âŒ

Redis Cluster fixes this by:

* Splitting data across nodes
* Using replicas for failover
* Executing commands in parallel across nodes

---

## 3ï¸âƒ£ Core Concepts (Very Important)

### ğŸ”¹ Hash Slots

* Redis Cluster uses **16384 fixed hash slots**
* Every key belongs to **exactly one slot**

```
slot = CRC16(key) % 16384
```

---

### ğŸ”¹ Masters and Replicas

| Node Type | Responsibility                             |
| --------- | ------------------------------------------ |
| Master    | Owns hash slots, handles writes            |
| Replica   | Copies data from master, used for failover |

> **Only masters own slots**
> **Replicas do not own slots**

---

## 4ï¸âƒ£ Basic Cluster Architecture

### Minimum Recommended Production Setup

```
Master A  â† Replica A1
Master B  â† Replica B1
Master C  â† Replica C1
```

* 3 masters
* 3 replicas
* Total nodes = **6**

---

## 5ï¸âƒ£ Data Sharding (How Data Is Distributed)

Redis does **NOT** use consistent hashing.

Instead:

```
Key â†’ Hash Slot â†’ Master Node
```

Example:

| Slot Range    | Owner    |
| ------------- | -------- |
| 0 â€“ 5500      | Master A |
| 5501 â€“ 11000  | Master B |
| 11001 â€“ 16383 | Master C |

---

## 6ï¸âƒ£ Scaling Redis Cluster

### â• Adding Nodes

* Redis **moves hash slots** from existing masters
* No rehashing of all keys
* No downtime (if done correctly)

### â– Removing Nodes

* Slots are moved away from the node
* Node is removed after slots = 0

> **Slot count NEVER changes (always 16384)**

---

## 7ï¸âƒ£ Failover (High Availability)

If a master fails:

1. Replicas detect failure
2. Cluster votes
3. One replica is promoted to master
4. Slots are reassigned

âœ” Automatic
âœ” No manual intervention

---

## 8ï¸âƒ£ Read & Write Behavior

### Writes

* Always go to the **slot-owning master**

### Reads

* Can go to:

  * Master (default)
  * Replica (optional, client-controlled)

---

## 9ï¸âƒ£ Multi-Key Operations (Important Limitation)

This âŒ fails:

```
MGET key1 key2
```

Why?

* Keys may be in **different slots**

---

### âœ… Hash Tags (Solution)

Force keys into same slot:

```
user:{123}
order:{123}
```

Only `{123}` is hashed â†’ same slot â†’ same node

---

## 10ï¸âƒ£ Transactions & Lua

| Feature       | Supported?            |
| ------------- | --------------------- |
| MULTI         | âœ… (same slot only)    |
| Lua script    | âœ… (atomic, same slot) |
| Cross-slot TX | âŒ                     |

---

## 11ï¸âƒ£ Redis Cluster vs Sentinel

| Feature  | Cluster        | Sentinel |
| -------- | -------------- | -------- |
| Sharding | âœ…              | âŒ        |
| Scaling  | Horizontal     | Vertical |
| Slots    | Yes            | No       |
| Use case | Large datasets | HA only  |

---

## 12ï¸âƒ£ When to Use Redis Cluster

âœ… Use when:

* Dataset > single machine RAM
* High QPS required
* Horizontal scaling needed
* Large production systems

âŒ Avoid when:

* Small datasets
* Heavy multi-key transactions
* Simple caching only

---

## 13ï¸âƒ£ Important Commands

```bash
# Create cluster
redis-cli --cluster create node1 node2 node3 node4 node5 node6 --cluster-replicas 1

# Check cluster status
redis-cli -c cluster info

# View slot distribution
redis-cli -c cluster nodes

# Rebalance slots
redis-cli --cluster rebalance <node>
```

---

## 14ï¸âƒ£ Client Behavior (Hidden but Important)

Clients:

* Cache slot â†’ node mapping
* On wrong node:

  * Receive `MOVED` or `ASK`
  * Redirect request automatically

---

## 15ï¸âƒ£ Key Takeaways (Memorize)

* Redis Cluster uses **16384 fixed hash slots**
* Slots are assigned to **masters**
* Replicas provide **failover**
* Scaling = moving slots, not changing slot count
* Multi-key ops require **hash tags**

---

## â­ Interview One-Line Answer

> Redis Cluster provides horizontal scalability and high availability by sharding data across 16384 hash slots owned by master nodes, with replicas ensuring failover.

---

## ğŸ“š Official Redis Documentation

* Redis Cluster Overview
  ğŸ”— [https://redis.io/docs/latest/operate/oss_and_stack/management/scaling/](https://redis.io/docs/latest/operate/oss_and_stack/management/scaling/)

* Redis Cluster Specification
  ğŸ”— [https://redis.io/docs/reference/cluster-spec/](https://redis.io/docs/reference/cluster-spec/)

---

If you want next:

* ğŸ“Š Redis Cluster vs Kafka
* ğŸ§  50 MCQs on Redis Cluster
* ğŸ”§ Production deployment guide
* ğŸ§ª Failure scenarios explained

Just say ğŸ‘
